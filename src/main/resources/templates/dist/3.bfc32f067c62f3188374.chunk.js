webpackJsonp([3],{1260:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"ty_index",components:{},props:{},data:function(){return{fields:[],fieldsBanner:{title:"",url:_TY_ENV.apiHost+"/urmscallback",icon:"icon_M_b wy-font",class:"wy-banner-left wy-banner-lg"},horizontal:"vertical",collapse:!1,userName:null,userInfo:null,buttonClass:"el-icon-icon_tuichu wy-font",colLeft:4,colRight:20,fieldsReady:null,toggleMenuIcon:"el-icon-icon_libiao wy-font",wyPageContainer:null,contentHeight:null,menuBackgroundHeight:null,menuBackgroundWidth:"160px",bannerButtonShow:!0,defaultOpeneds:[],parentPath:"",buzz:"",buzzExcuteOnlyOne:!1}},watch:{},computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date}},beforeCreate:function(){},created:function(){this.getUserInfo(),this.getResources(),this.setStyle(),this.setMinHeight()},updated:function updated(){var t=this;if(!t.buzzExcuteOnlyOne){t.buzzExcuteOnlyOne=!0;var menu=t.$refs.leftMenu;try{eval(t.buzz)}catch(e){console.log(e)}}},methods:{handleOpen:function(e,t){},handleClose:function(e,t){},goto:function(e){this.$router.push(e)},toggleMenu:function(){this.collapse=!this.collapse,this.buttonClass=this.collapse?"el-icon-icon_shezhi wy-font":"el-icon-icon_tuichu wy-font",this.colLeft=4==this.colLeft?2:4,this.colRight=20==this.colRight?22:20;var e=this.fieldsReady;e[0].icon="el-icon-icon_M wy-font"==e[0].icon?"el-icon-icon_M_b wy-font":"el-icon-icon_M wy-font",e[0].class="wy-banner-left wy-banner-xs"==e[0].class?"wy-banner-left wy-banner-lg":"wy-banner-left wy-banner-xs",this.$set(this.fieldsReady,e),this.setMinHeight()},getValue:function(){},getUserInfo:function(){var e=this,t=localStorage.getItem("userInfo");if(t){var n=JSON.parse(t);e.userInfo=n,e.userName=n.user_name}},getResources:function(){var e=this;_TY_Tool.get("/ty/resources/"+e.$route.params.appAlias).then(function(t){var n=t.data;if(n.ok){var o=n.data.pages;e.fieldsReady=[],e.fieldsReady.splice(0,0,e.fieldsBanner);e.buildTreeMenu(e,o,0).forEach(function(t,n){e.fieldsReady.splice(n+1,0,t)}),n.data.buzz&&(e.buzz=n.data.buzz)}else e.$message.error(n.message)},function(e){})},buildTreeMenu:function(e,t,n){var o=e||this,i=[];o.parentPath=o.$route.matched[0].path.replace(":appAlias",o.$route.params.appAlias);for(var a=0;a<t.length;a++){var s=t[a];if("sub"!=s.type){var l={};if(l.title=s.name,"category"==s.type?(l.url=s.alias,o.defaultOpeneds.includes(s.alias)||o.defaultOpeneds.push(s.alias)):l.url=o.parentPath+"/"+s.alias,s.icon&&(l.icon=s.icon+" wy-font"),s.parentId==n){var r=o.buildTreeMenu(o,t,s.id);r&&r.length>0&&(l.children=r),i.push(l)}}}return i},logout:function(){_TY_Tool.get("/wy/user/logout").then(function(e){localStorage.removeItem("userInfo"),window.location.reload()},function(e){window.location.reload()})},handleCommand:function(e){var t=this;"logout"==e&&t.logout()},setStyle:function(){var e=this;-1==window.location.href.indexOf("wy-index")?e.wyPageContainer="wy-content-height":e.wyPageContainer="wyIndexBackground wy-content-height"},menuClick:function(){this.setStyle()},setMinHeight:function(){this.contentHeight=window.screen.availHeight-50-65+"px",this.menuBackgroundHeight=window.screen.availHeight-65+"px",this.menuBackgroundWidth=this.collapse?"64px":"160px"}}}},1263:function(e,t){},1267:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wy"},[n("el-row",{staticClass:"content-box wy-container",attrs:{type:"flex",justify:"center"}},[n("el-col",{staticClass:"wy-container-left"},[n("div",{staticClass:"wy-bannerBg",attrs:{id:"wy-dialog"}}),e._v(" "),n("div",{staticClass:"wy-menu-container",style:{width:e.menuBackgroundWidth}},[n("bb-menu",{ref:"leftMenu",staticClass:"el-menu-vertical wy-menu",attrs:{fields:e.fieldsReady,collapse:e.collapse,horizontal:e.horizontal,defaultOpeneds:e.defaultOpeneds},on:{click:e.menuClick}})],1)]),e._v(" "),n("el-col",{staticClass:"wy-container-right wy-container-height",attrs:{id:"wy-container-right"}},[n("div",[n("div",{staticClass:"wy-banner"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.bannerButtonShow,expression:"bannerButtonShow"}],staticClass:"wy-toggleMenu",attrs:{type:"text",icon:e.toggleMenuIcon},on:{click:e.toggleMenu}}),e._v(" "),n("el-dropdown",{staticClass:"wy-logout",attrs:{trigger:"click"},on:{command:e.handleCommand}},[n("span",{staticClass:"dropdown-link"},[e._v("\n                                    "+e._s(e.userName)),n("i",{staticClass:"el-icon-caret-bottom el-icon-right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出")])],1)],1)],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"wy-content",attrs:{id:"ty-content"}},[n("router-view",{key:e.key,class:e.wyPageContainer}),e._v(" "),n("div",{staticClass:"wy-bottom"},[n("p",[e._v("如果您在使用系统过程中有任何帮助需要，请联系IT服务台  热线电话: 400-9200-555  服务邮箱: helpdesk@chinaredstar.com")]),e._v(" "),n("p",[e._v("© Copyright 2017 by China Redstar Co, Ltd . All right reserved")])])],1)])],1)])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},551:function(e,t,n){n(1263);var o=n(2)(n(1260),n(1267),null,null);o.options.__file="/Users/xiaobc/work/ty/p-ty/src/custom/index.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports}});